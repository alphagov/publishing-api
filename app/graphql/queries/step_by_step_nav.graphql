fragment defaultFields on Edition {
  analytics_identifier
  api_path
  api_url
  base_path
  content_id
  document_type
  locale
  public_updated_at
  schema_name
  title
  web_url
}

query step_by_step_nav($base_path: String!, $with_drafts: Boolean) {
  edition(base_path: $base_path, with_drafts: $with_drafts) {
    ... on Edition {
      analytics_identifier
      base_path
      content_id
      description
      details {
        body
        change_history
        step_by_step_nav
      }
      document_type
      first_published_at
      links {
        available_translations {
          ...defaultFields
        }
        children {
          ...defaultFields
          description
          details {
            access_and_opening_times
            change_description
            contact_form_links
            country
            dates_in_office
            description
            email_addresses
            phone_numbers
            political_party
            post_addresses
            step_by_step_nav
            title
          }
        }
        document_collections {
          ...defaultFields
        }
        embed {
          ...defaultFields
          details {
            description
            rates
          }
        }
        pages_part_of_step_nav {
          ...defaultFields
          details {
            contact_form_links
            description
            email_addresses
            phone_numbers
            post_addresses
            step_by_step_nav
            title
          }
        }
        pages_related_to_step_nav {
          ...defaultFields
          details {
            step_by_step_nav
          }
        }
        pages_secondary_to_step_nav {
          ...defaultFields
        }
        part_of_step_navs {
          ...defaultFields
          details {
            step_by_step_nav
          }
        }
        policy_areas {
          ...defaultFields
        }
        related_to_step_navs {
          ...defaultFields
          details {
            step_by_step_nav
          }
        }
        role_appointments {
          ...defaultFields
          details {
            current
            ended_on
            person_appointment_order
            started_on
          }
          links {
            person {
              ...defaultFields
              details {
                body
                image
              }
            }
            role {
              ...defaultFields
              details {
                body
                role_payment_type
                seniority
                whip_organisation
              }
              links {
                ordered_parent_organisations {
                  analytics_identifier
                  api_path
                  api_url
                  base_path
                  content_id
                  details {
                    acronym
                    brand
                    default_news_image
                    logo
                    organisation_govuk_status
                  }
                  document_type
                  locale
                  schema_name
                  title
                  web_url
                }
              }
            }
          }
        }
        secondary_to_step_navs {
          ...defaultFields
          details {
            step_by_step_nav
          }
        }
      }
      locale
      phase
      public_updated_at
      publishing_app
      publishing_request_id
      publishing_scheduled_at
      rendering_app
      scheduled_publishing_delay_seconds
      schema_name
      title
      updated_at
      withdrawn_notice {
        explanation
        withdrawn_at
      }
    }
  }
}
