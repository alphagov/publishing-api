fragment defaultFields on Edition {
  analytics_identifier
  api_path
  api_url
  base_path
  content_id
  document_type
  locale
  public_updated_at
  schema_name
  title
  web_url
}

query travel_advice_index($base_path: String!, $with_drafts: Boolean) {
  edition(base_path: $base_path, with_drafts: $with_drafts) {
    ... on Edition {
      analytics_identifier
      base_path
      content_id
      description
      details {
        email_signup_link
        max_cache_time
      }
      document_type
      first_published_at
      links {
        available_translations {
          ...defaultFields
        }
        children {
          base_path
          details {
            change_description
            country
          }
          public_updated_at
          title
          web_url
        }
        ordered_related_items {
          links {
            mainstream_browse_pages {
              links {
                parent {
                  title
                }
              }
            }
          }
        }
        organisations {
          analytics_identifier
        }
        parent {
          ...defaultFields
          description
          details {
            acronym
            brand
            default_news_image
            logo
            organisation_govuk_status
            world_location_names
          }
          links {
            parent {
              ...defaultFields
              description
              details {
                acronym
                brand
                default_news_image
                logo
                organisation_govuk_status
                world_location_names
              }
              links {
                parent {
                  ...defaultFields
                  description
                  details {
                    acronym
                    brand
                    default_news_image
                    logo
                    organisation_govuk_status
                    world_location_names
                  }
                  links {
                    parent {
                      ...defaultFields
                      description
                      details {
                        acronym
                        brand
                        default_news_image
                        logo
                        organisation_govuk_status
                        world_location_names
                      }
                      links {
                        parent {
                          ...defaultFields
                          description
                          details {
                            acronym
                            brand
                            default_news_image
                            logo
                            organisation_govuk_status
                            world_location_names
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
        primary_publishing_organisation {
          title
        }
        taxons {
          ...defaultFields
          description
          details: details_json
          links {
            parent_taxons {
              ...defaultFields
              description
              details: details_json
              links {
                parent_taxons {
                  ...defaultFields
                  description
                  details: details_json
                  links {
                    parent_taxons {
                      ...defaultFields
                      description
                      details: details_json
                      links {
                        parent_taxons {
                          ...defaultFields
                          description
                          details: details_json
                          phase
                        }
                        root_taxon {
                          ...defaultFields
                        }
                      }
                      phase
                    }
                    root_taxon {
                      ...defaultFields
                    }
                  }
                  phase
                }
                root_taxon {
                  ...defaultFields
                }
              }
              phase
            }
            root_taxon {
              ...defaultFields
            }
          }
          phase
        }
      }
      locale
      phase
      public_updated_at
      publishing_app
      publishing_request_id
      publishing_scheduled_at
      rendering_app
      scheduled_publishing_delay_seconds
      schema_name
      title
      updated_at
      withdrawn_notice {
        explanation
        withdrawn_at
      }
    }
  }
}
