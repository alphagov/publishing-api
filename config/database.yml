default: &default
  adapter: postgresql
  encoding: unicode
  pool: 5
  template: template0

development:
  <<: *default
  database: publishing_api_development
  url: <%= ENV["DATABASE_URL"] %>

test:
  <<: *default
  # EXECUTOR_NUMBER is a env var added by Jenkins, this allows concurrent builds
  # on the same box without the database colliding.
  database: publishing_api_test<%= "_executor_#{ENV['EXECUTOR_NUMBER']}" if ENV["EXECUTOR_NUMBER"] %>
  url: <%= ENV["DATABASE_URL"].try(:sub, /([-_]development)?$/, "_test") %>

production:
  <<: *default
  # Rails reads values from DATABASE_URL env var.
